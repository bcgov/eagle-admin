{"version":3,"file":"ng-bootstrap-ng-bootstrap-scrollspy.mjs","sources":["../../../src/scrollspy/scrollspy.utils.ts","../../../src/scrollspy/scrollspy-config.ts","../../../src/scrollspy/scrollspy.service.ts","../../../src/scrollspy/scrollspy.ts","../../../src/scrollspy/scrollspy.module.ts","../../../src/scrollspy/ng-bootstrap-ng-bootstrap-scrollspy.ts"],"sourcesContent":["import { NgbScrollSpyOptions, NgbScrollSpyProcessChanges, NgbScrollSpyService } from './scrollspy.service';\nimport { isString } from './_ngb-ngbootstrap-utilities.mjs';\n\nexport function toFragmentElement(container: Element | null, id?: string | HTMLElement | null): HTMLElement | null {\n\tif (!container || id == null) {\n\t\treturn null;\n\t}\n\treturn isString(id) ? container.querySelector(`#${CSS.escape(id)}`) : id;\n}\n\nfunction getOrderedFragments(container: Element, fragments: Set<Element>): Element[] {\n\tconst selector = [...fragments].map(({ id }) => `#${CSS.escape(id)}`).join(',');\n\treturn Array.from(container.querySelectorAll(selector));\n}\n\nexport const defaultProcessChanges: NgbScrollSpyProcessChanges = (\n\tstate: {\n\t\tentries: IntersectionObserverEntry[];\n\t\trootElement: HTMLElement;\n\t\tfragments: Set<Element>;\n\t\tscrollSpy: NgbScrollSpyService;\n\t\toptions: NgbScrollSpyOptions;\n\t},\n\tchangeActive: (active: string) => void,\n\tctx: {\n\t\tinitialized: boolean;\n\t\tgapFragment: Element | null;\n\t\tvisibleFragments: Set<Element>;\n\t},\n) => {\n\tconst { rootElement, fragments, scrollSpy, options, entries } = state;\n\tconst orderedFragments = getOrderedFragments(rootElement, fragments);\n\n\tif (!ctx.initialized) {\n\t\tctx.initialized = true;\n\t\tctx.gapFragment = null;\n\t\tctx.visibleFragments = new Set<Element>();\n\n\t\t// special case when one of the fragments was pre-selected\n\t\tconst preSelectedFragment = toFragmentElement(rootElement, options?.initialFragment);\n\t\tif (preSelectedFragment) {\n\t\t\tscrollSpy.scrollTo(preSelectedFragment);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tfor (const entry of entries) {\n\t\tconst { isIntersecting, target: fragment } = entry;\n\n\t\t// 1. an entry became visible\n\t\tif (isIntersecting) {\n\t\t\t// if we were in-between two elements, we have to clear it up\n\t\t\tif (ctx.gapFragment) {\n\t\t\t\tctx.visibleFragments.delete(ctx.gapFragment);\n\t\t\t\tctx.gapFragment = null;\n\t\t\t}\n\n\t\t\tctx.visibleFragments.add(fragment);\n\t\t}\n\n\t\t// 2. an entry became invisible\n\t\telse {\n\t\t\tctx.visibleFragments.delete(fragment);\n\n\t\t\t// nothing is visible anymore, but something just was actually\n\t\t\tif (ctx.visibleFragments.size === 0 && scrollSpy.active !== '') {\n\t\t\t\t// 2.1 scrolling down - keeping the same element\n\t\t\t\tif (entry.boundingClientRect.top < entry.rootBounds!.top) {\n\t\t\t\t\tctx.gapFragment = fragment;\n\t\t\t\t\tctx.visibleFragments.add(ctx.gapFragment);\n\t\t\t\t}\n\t\t\t\t// 2.2 scrolling up - getting the previous element\n\t\t\t\telse {\n\t\t\t\t\t// scrolling up and no more fragments above\n\t\t\t\t\tif (fragment === orderedFragments[0]) {\n\t\t\t\t\t\tctx.gapFragment = null;\n\t\t\t\t\t\tctx.visibleFragments.clear();\n\t\t\t\t\t\tchangeActive('');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// getting previous fragment\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst fragmentIndex = orderedFragments.indexOf(fragment);\n\t\t\t\t\t\tctx.gapFragment = orderedFragments[fragmentIndex - 1] || null;\n\t\t\t\t\t\tif (ctx.gapFragment) {\n\t\t\t\t\t\t\tctx.visibleFragments.add(ctx.gapFragment);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// getting the first visible element in the DOM order of the fragments\n\tfor (const fragment of orderedFragments) {\n\t\tif (ctx.visibleFragments.has(fragment)) {\n\t\t\tchangeActive(fragment.id);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n","import { Injectable } from '@angular/core';\nimport { NgbScrollSpyProcessChanges } from './scrollspy.service';\nimport { defaultProcessChanges } from './scrollspy.utils';\n\n/**\n * A configuration service for the [`NgbScrollSpyService`](#/components/scrollspy/api#NgbScrollSpyService).\n *\n * You can inject this service, typically in your root component, and customize the values of its properties in\n * order to provide default values for all scrollspies used in the application.\n *\n * @since 15.1.0\n */\n@Injectable({ providedIn: 'root' })\nexport class NgbScrollSpyConfig {\n\tscrollBehavior: 'auto' | 'smooth' = 'smooth';\n\tprocessChanges: NgbScrollSpyProcessChanges = defaultProcessChanges;\n}\n","import { ChangeDetectorRef, inject, Injectable, NgZone, OnDestroy, PLATFORM_ID, DOCUMENT } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { NgbScrollSpyRef } from './scrollspy';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { NgbScrollSpyConfig } from './scrollspy-config';\nimport { isPlatformBrowser } from '@angular/common';\nimport { toFragmentElement } from './scrollspy.utils';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\n\nconst MATCH_THRESHOLD = 3;\n\nexport type NgbScrollSpyProcessChanges = (\n\tstate: {\n\t\tentries: IntersectionObserverEntry[];\n\t\trootElement: HTMLElement;\n\t\tfragments: Set<Element>;\n\t\tscrollSpy: NgbScrollSpyService;\n\t\toptions: NgbScrollSpyOptions;\n\t},\n\tchangeActive: (active: string) => void,\n\tcontext: object,\n) => void;\n\n/**\n * Options passed to the `NgbScrollSpyService.start()` method for scrollspy initialization.\n *\n * It contains a subset of the `IntersectionObserverInit` options, as well additional optional properties\n * like `changeDetectorRef` or `fragments`\n *\n * @since 15.1.0\n */\nexport interface NgbScrollSpyOptions extends Pick<IntersectionObserverInit, 'root' | 'rootMargin' | 'threshold'> {\n\t/**\n\t * An optional reference to the change detector, that should be marked for check when active fragment changes.\n\t * If it is not provided, the service will try to get it from the DI. Ex. when using the `ngbScrollSpy` directive,\n\t * it will mark for check the directive's host component.\n\t *\n\t * `.markForCheck()` will be called on the change detector when the active fragment changes.\n\t */\n\tchangeDetectorRef?: ChangeDetectorRef;\n\n\t/**\n\t * An optional initial fragment to scroll to when the service starts.\n\t */\n\tinitialFragment?: string | HTMLElement;\n\n\t/**\n\t * An optional list of fragments to observe when the service starts.\n\t * You can alternatively use `.addFragment()` to add fragments.\n\t */\n\tfragments?: (string | HTMLElement)[];\n\n\t/**\n\t * An optional function that is called when the `IntersectionObserver` detects a change.\n\t * It is used to determine if currently active fragment should be changed.\n\t *\n\t * You can override this function to provide your own scrollspy logic.\n\t * It provides:\n\t *  - a scrollspy `state` (observer entries, root element, fragments, scrollSpy instance, etc.)\n\t *  - a `changeActive` function that should be called with the new active fragment\n\t *  - a `context` that is persisted between calls\n\t */\n\tprocessChanges?: NgbScrollSpyProcessChanges;\n\n\t/**\n\t * An optional `IntersectionObserver` root element. If not provided, the document element will be used.\n\t */\n\troot?: HTMLElement;\n\n\t/**\n\t * An optional `IntersectionObserver` margin for the root element.\n\t */\n\trootMargin?: string;\n\n\t/**\n\t * An optional default scroll behavior to use when using the `.scrollTo()` method.\n\t */\n\tscrollBehavior?: 'auto' | 'smooth';\n\n\t/**\n\t * An optional `IntersectionObserver` threshold.\n\t */\n\tthreshold?: number | number[];\n}\n\n/**\n * Scroll options passed to the `.scrollTo()` method.\n * An extension of the standard `ScrollOptions` interface.\n *\n * @since 15.1.0\n */\nexport interface NgbScrollToOptions extends ScrollOptions {\n\t/**\n\t * Scroll behavior as defined in the `ScrollOptions` interface.\n\t */\n\tbehavior?: 'auto' | 'smooth';\n}\n\n/**\n * A scrollspy service that allows tracking of elements scrolling in and out of view.\n *\n * It can be instantiated manually, or automatically by the `ngbScrollSpy` directive.\n *\n * @since 15.1.0\n */\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class NgbScrollSpyService implements NgbScrollSpyRef, OnDestroy {\n\tprivate _observer: IntersectionObserver | null = null;\n\n\tprivate _containerElement: HTMLElement | null = null;\n\tprivate _fragments = new Set<Element>();\n\tprivate _preRegisteredFragments = new Set<string | HTMLElement>();\n\n\tprivate _active$ = new Subject<string>();\n\tprivate _distinctActive$ = this._active$.pipe(distinctUntilChanged());\n\tprivate _active = '';\n\n\tprivate _config = inject(NgbScrollSpyConfig);\n\tprivate _document = inject(DOCUMENT);\n\tprivate _platformId = inject(PLATFORM_ID);\n\tprivate _scrollBehavior = this._config.scrollBehavior;\n\tprivate _diChangeDetectorRef = inject(ChangeDetectorRef, { optional: true });\n\tprivate _changeDetectorRef = this._diChangeDetectorRef;\n\tprivate _zone = inject(NgZone);\n\n\tconstructor() {\n\t\tthis._distinctActive$.pipe(takeUntilDestroyed()).subscribe((active) => {\n\t\t\tthis._active = active;\n\t\t\tthis._changeDetectorRef?.markForCheck();\n\t\t});\n\t}\n\n\t/**\n\t * Getter for the currently active fragment id. Returns empty string if none.\n\t */\n\tget active(): string {\n\t\treturn this._active;\n\t}\n\n\t/**\n\t * An observable emitting the currently active fragment. Emits empty string if none.\n\t */\n\tget active$(): Observable<string> {\n\t\treturn this._distinctActive$;\n\t}\n\n\t/**\n\t * Starts the scrollspy service and observes specified fragments.\n\t *\n\t * You can specify a list of options to pass, like the root element, initial fragment, scroll behavior, etc.\n\t * See the [`NgbScrollSpyOptions`](#/components/scrollspy/api#NgbScrollSpyOptions) interface for more details.\n\t */\n\tstart(options?: NgbScrollSpyOptions) {\n\t\tif (isPlatformBrowser(this._platformId)) {\n\t\t\tthis._cleanup();\n\n\t\t\tconst { root, rootMargin, scrollBehavior, threshold, fragments, changeDetectorRef, processChanges } = {\n\t\t\t\t...options,\n\t\t\t};\n\t\t\tthis._containerElement = root ?? this._document.documentElement;\n\t\t\tthis._changeDetectorRef = changeDetectorRef ?? this._diChangeDetectorRef;\n\t\t\tthis._scrollBehavior = scrollBehavior ?? this._config.scrollBehavior;\n\t\t\tconst processChangesFn = processChanges ?? this._config.processChanges;\n\n\t\t\tconst context = {};\n\t\t\tthis._observer = new IntersectionObserver(\n\t\t\t\t(entries) =>\n\t\t\t\t\tprocessChangesFn(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentries,\n\t\t\t\t\t\t\trootElement: this._containerElement!,\n\t\t\t\t\t\t\tfragments: this._fragments,\n\t\t\t\t\t\t\tscrollSpy: this,\n\t\t\t\t\t\t\toptions: { ...options },\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(active: string) => this._active$.next(active),\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\troot: root ?? this._document,\n\t\t\t\t\t...(rootMargin && { rootMargin }),\n\t\t\t\t\t...(threshold && { threshold }),\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// merging fragments added before starting and the ones passed as options\n\t\t\tfor (const element of [...this._preRegisteredFragments, ...(fragments ?? [])]) {\n\t\t\t\tthis.observe(element);\n\t\t\t}\n\n\t\t\tthis._preRegisteredFragments.clear();\n\t\t}\n\t}\n\n\t/**\n\t * Stops the service and unobserves all fragments.\n\t */\n\tstop() {\n\t\tthis._cleanup();\n\t\tthis._active$.next('');\n\t}\n\n\t/**\n\t * Scrolls to a fragment, it must be known to the service and contained in the root element.\n\t * An id or an element reference can be passed.\n\t *\n\t * [`NgbScrollToOptions`](#/components/scrollspy/api#NgbScrollToOptions) can be passed.\n\t */\n\tscrollTo(fragment: string | HTMLElement, options?: NgbScrollToOptions) {\n\t\tconst { behavior } = { behavior: this._scrollBehavior, ...options };\n\n\t\tif (this._containerElement) {\n\t\t\tconst fragmentElement = toFragmentElement(this._containerElement, fragment);\n\n\t\t\tif (fragmentElement) {\n\t\t\t\tconst heightPx = fragmentElement.offsetTop - this._containerElement.offsetTop;\n\n\t\t\t\tthis._containerElement.scrollTo({ top: heightPx, behavior });\n\n\t\t\t\tlet lastOffset = this._containerElement.scrollTop;\n\t\t\t\tlet matchCounter = 0;\n\n\t\t\t\t// we should update the active section only after scrolling is finished\n\t\t\t\t// and there is no clean way to do it at the moment\n\t\t\t\tconst containerElement = this._containerElement;\n\t\t\t\tthis._zone.runOutsideAngular(() => {\n\t\t\t\t\tconst updateActiveWhenScrollingIsFinished = () => {\n\t\t\t\t\t\tconst sameOffsetAsLastTime = lastOffset === containerElement.scrollTop;\n\n\t\t\t\t\t\tif (sameOffsetAsLastTime) {\n\t\t\t\t\t\t\tmatchCounter++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmatchCounter = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!sameOffsetAsLastTime || (sameOffsetAsLastTime && matchCounter < MATCH_THRESHOLD)) {\n\t\t\t\t\t\t\tlastOffset = containerElement.scrollTop;\n\n\t\t\t\t\t\t\trequestAnimationFrame(updateActiveWhenScrollingIsFinished);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._zone.run(() => this._active$.next(fragmentElement.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\trequestAnimationFrame(updateActiveWhenScrollingIsFinished);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adds a fragment to observe. It must be contained in the root element.\n\t * An id or an element reference can be passed.\n\t */\n\tobserve(fragment: string | HTMLElement) {\n\t\tif (!this._observer) {\n\t\t\tthis._preRegisteredFragments.add(fragment);\n\t\t\treturn;\n\t\t}\n\n\t\tconst fragmentElement = toFragmentElement(this._containerElement, fragment);\n\n\t\tif (fragmentElement && !this._fragments.has(fragmentElement)) {\n\t\t\tthis._fragments.add(fragmentElement);\n\t\t\tthis._observer.observe(fragmentElement);\n\t\t}\n\t}\n\n\t/**\n\t * Unobserves a fragment.\n\t * An id or an element reference can be passed.\n\t */\n\tunobserve(fragment: string | HTMLElement) {\n\t\tif (!this._observer) {\n\t\t\tthis._preRegisteredFragments.delete(fragment);\n\t\t\treturn;\n\t\t}\n\n\t\tconst fragmentElement = toFragmentElement(this._containerElement, fragment);\n\n\t\tif (fragmentElement) {\n\t\t\tthis._fragments.delete(fragmentElement);\n\n\t\t\t// we're removing and re-adding all current fragments to recompute active one\n\t\t\tthis._observer.disconnect();\n\n\t\t\tfor (const fragment of this._fragments) {\n\t\t\t\tthis._observer.observe(fragment);\n\t\t\t}\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis._cleanup();\n\t}\n\n\tprivate _cleanup() {\n\t\tthis._fragments.clear();\n\t\tthis._observer?.disconnect();\n\t\tthis._changeDetectorRef = this._diChangeDetectorRef;\n\t\tthis._scrollBehavior = this._config.scrollBehavior;\n\t\tthis._observer = null;\n\t\tthis._containerElement = null;\n\t}\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectorRef,\n\tContentChildren,\n\tDestroyRef,\n\tDirective,\n\tElementRef,\n\tinject,\n\tInput,\n\tOnInit,\n\tOutput,\n\tQueryList,\n} from '@angular/core';\nimport { NgbScrollSpyProcessChanges, NgbScrollSpyService, NgbScrollToOptions } from './scrollspy.service';\nimport { Observable } from 'rxjs';\nimport { isString } from './_ngb-ngbootstrap-utilities.mjs';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\n\n/**\n * Common interface for the scroll spy API.\n *\n * @internal\n */\nexport interface NgbScrollSpyRef {\n\tget active(): string;\n\tget active$(): Observable<string>;\n\tscrollTo(fragment: string | HTMLElement, options?: NgbScrollToOptions): void;\n}\n\n/**\n * A helper directive to that links menu items and fragments together.\n *\n * It will automatically add the `.active` class to the menu item when the associated fragment becomes active.\n *\n * @since 15.1.0\n */\n@Directive({\n\tselector: '[ngbScrollSpyItem]',\n\texportAs: 'ngbScrollSpyItem',\n\thost: {\n\t\t'[class.active]': 'isActive()',\n\t\t'(click)': 'scrollTo();',\n\t},\n})\nexport class NgbScrollSpyItem implements OnInit {\n\tprivate _changeDetector = inject(ChangeDetectorRef);\n\tprivate _scrollSpyMenu = inject(NgbScrollSpyMenu, { optional: true });\n\tprivate _scrollSpyAPI: NgbScrollSpyRef = this._scrollSpyMenu ?? inject(NgbScrollSpyService);\n\tprivate _destroyRef = inject(DestroyRef);\n\n\tprivate _isActive = false;\n\n\t/**\n\t * References the scroll spy directive, the id of the associated fragment and the parent menu item.\n\t *\n\t * Can be used like:\n\t *  - `ngbScrollSpyItem=\"fragmentId\"`\n\t *  - `[ngbScrollSpyItem]=\"scrollSpy\" fragment=\"fragmentId\"\n\t *  - `[ngbScrollSpyItem]=\"[scrollSpy, 'fragmentId']\"` parent=\"parentId\"`\n\t *  - `[ngbScrollSpyItem]=\"[scrollSpy, 'fragmentId', 'parentId']\"`\n\t *\n\t *  As well as together with `[fragment]` and `[parent]` inputs.\n\t */\n\t@Input('ngbScrollSpyItem') set data(data: NgbScrollSpy | string | [NgbScrollSpy, string, string?]) {\n\t\tif (Array.isArray(data)) {\n\t\t\tthis._scrollSpyAPI = data[0];\n\t\t\tthis.fragment = data[1];\n\t\t\tthis.parent ??= data[2];\n\t\t} else if (data instanceof NgbScrollSpy) {\n\t\t\tthis._scrollSpyAPI = data;\n\t\t} else if (isString(data)) {\n\t\t\tthis.fragment = data;\n\t\t}\n\t}\n\n\t/**\n\t * The id of the associated fragment.\n\t */\n\t@Input() fragment: string;\n\n\t/**\n\t * The id of the parent scroll spy menu item.\n\t */\n\t@Input() parent: string | undefined;\n\n\tngOnInit(): void {\n\t\t// if it is not a part of a bigger menu, it should handle activation itself\n\t\tif (!this._scrollSpyMenu) {\n\t\t\tthis._scrollSpyAPI.active$.pipe(takeUntilDestroyed(this._destroyRef)).subscribe((active: string) => {\n\t\t\t\tif (active === this.fragment) {\n\t\t\t\t\tthis._activate();\n\t\t\t\t} else {\n\t\t\t\t\tthis._deactivate();\n\t\t\t\t}\n\t\t\t\tthis._changeDetector.markForCheck();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\t_activate(): void {\n\t\tthis._isActive = true;\n\t\tif (this._scrollSpyMenu) {\n\t\t\tthis._scrollSpyMenu.getItem(this.parent ?? '')?._activate();\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\t_deactivate(): void {\n\t\tthis._isActive = false;\n\t\tif (this._scrollSpyMenu) {\n\t\t\tthis._scrollSpyMenu.getItem(this.parent ?? '')?._deactivate();\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true`, if the associated fragment is active.\n\t */\n\tisActive(): boolean {\n\t\treturn this._isActive;\n\t}\n\n\t/**\n\t * Scrolls to the associated fragment.\n\t */\n\tscrollTo(options?: NgbScrollToOptions): void {\n\t\tthis._scrollSpyAPI.scrollTo(this.fragment, options);\n\t}\n}\n\n/**\n * An optional scroll spy menu directive to build hierarchical menus\n * and simplify the [`NgbScrollSpyItem`](#/components/scrollspy/api#NgbScrollSpyItem) configuration.\n *\n * @since 15.1.0\n */\n@Directive({\n\tselector: '[ngbScrollSpyMenu]',\n})\nexport class NgbScrollSpyMenu implements NgbScrollSpyRef, AfterViewInit {\n\tprivate _scrollSpyRef: NgbScrollSpyRef = inject(NgbScrollSpyService);\n\tprivate _destroyRef = inject(DestroyRef);\n\tprivate _map = new Map<string, NgbScrollSpyItem>();\n\tprivate _lastActiveItem: NgbScrollSpyItem | null = null;\n\n\t@ContentChildren(NgbScrollSpyItem, { descendants: true }) private _items: QueryList<NgbScrollSpyItem>;\n\n\t@Input('ngbScrollSpyMenu') set scrollSpy(scrollSpy: NgbScrollSpy) {\n\t\tthis._scrollSpyRef = scrollSpy;\n\t}\n\n\tget active(): string {\n\t\treturn this._scrollSpyRef.active;\n\t}\n\tget active$(): Observable<string> {\n\t\treturn this._scrollSpyRef.active$;\n\t}\n\tscrollTo(fragment: string, options?: NgbScrollToOptions): void {\n\t\tthis._scrollSpyRef.scrollTo(fragment, options);\n\t}\n\n\tgetItem(id: string): NgbScrollSpyItem | undefined {\n\t\treturn this._map.get(id);\n\t}\n\n\tngAfterViewInit() {\n\t\tthis._items.changes.pipe(takeUntilDestroyed(this._destroyRef)).subscribe(() => this._rebuildMap());\n\t\tthis._rebuildMap();\n\n\t\tthis._scrollSpyRef.active$.pipe(takeUntilDestroyed(this._destroyRef)).subscribe((activeId) => {\n\t\t\tthis._lastActiveItem?._deactivate();\n\t\t\tconst item = this._map.get(activeId);\n\t\t\tif (item) {\n\t\t\t\titem._activate();\n\t\t\t\tthis._lastActiveItem = item;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _rebuildMap() {\n\t\tthis._map.clear();\n\t\tfor (let item of this._items) {\n\t\t\tthis._map.set(item.fragment, item);\n\t\t}\n\t}\n}\n\n/**\n * A directive to put on a scrollable container.\n *\n * It will instantiate a [`NgbScrollSpyService`](#/components/scrollspy/api#NgbScrollSpyService).\n *\n * @since 15.1.0\n */\n@Directive({\n\tselector: '[ngbScrollSpy]',\n\texportAs: 'ngbScrollSpy',\n\thost: {\n\t\ttabindex: '0',\n\t\tstyle: 'overflow-y: auto',\n\t},\n\tproviders: [NgbScrollSpyService],\n})\nexport class NgbScrollSpy implements NgbScrollSpyRef, AfterViewInit {\n\tstatic ngAcceptInputType_scrollBehavior: string;\n\n\tprivate _initialFragment: string | null = null;\n\tprivate _service = inject(NgbScrollSpyService);\n\tprivate _nativeElement = inject<ElementRef<HTMLElement>>(ElementRef).nativeElement;\n\n\t/**\n\t * A function that is called when the `IntersectionObserver` detects a change.\n\t *\n\t * See [`NgbScrollSpyOptions`](#/components/scrollspy/api#NgbScrollSpyOptions) for more details.\n\t */\n\t@Input() processChanges: NgbScrollSpyProcessChanges;\n\n\t/**\n\t * An `IntersectionObserver` root margin.\n\t */\n\t@Input() rootMargin: string;\n\n\t/**\n\t * The scroll behavior for the `.scrollTo()` method.\n\t */\n\t@Input() scrollBehavior: 'auto' | 'smooth';\n\n\t/**\n\t * An `IntersectionObserver` threshold.\n\t */\n\t@Input() threshold: number | number[];\n\n\t@Input() set active(fragment: string) {\n\t\tthis._initialFragment = fragment;\n\t\tthis.scrollTo(fragment);\n\t}\n\n\t/**\n\t * An event raised when the active section changes.\n\t *\n\t * Payload is the id of the new active section, empty string if none.\n\t */\n\t@Output() activeChange = this._service.active$;\n\n\t/**\n\t * Getter/setter for the currently active fragment id.\n\t */\n\tget active(): string {\n\t\treturn this._service.active;\n\t}\n\n\t/**\n\t * Returns an observable that emits currently active section id.\n\t */\n\tget active$(): Observable<string> {\n\t\treturn this._service.active$;\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis._service.start({\n\t\t\tprocessChanges: this.processChanges,\n\t\t\troot: this._nativeElement,\n\t\t\trootMargin: this.rootMargin,\n\t\t\tthreshold: this.threshold,\n\t\t\t...(this._initialFragment && { initialFragment: this._initialFragment }),\n\t\t});\n\t}\n\n\t/**\n\t * @internal\n\t */\n\t_registerFragment(fragment: NgbScrollSpyFragment): void {\n\t\tthis._service.observe(fragment.id);\n\t}\n\n\t/**\n\t * @internal\n\t */\n\t_unregisterFragment(fragment: NgbScrollSpyFragment): void {\n\t\tthis._service.unobserve(fragment.id);\n\t}\n\n\t/**\n\t * Scrolls to a fragment that is identified by the `ngbScrollSpyFragment` directive.\n\t * An id or an element reference can be passed.\n\t */\n\tscrollTo(fragment: string | HTMLElement, options?: NgbScrollToOptions): void {\n\t\tthis._service.scrollTo(fragment, {\n\t\t\t...(this.scrollBehavior && { behavior: this.scrollBehavior }),\n\t\t\t...options,\n\t\t});\n\t}\n}\n\n/**\n * A directive to put on a fragment observed inside a scrollspy container.\n *\n * @since 15.1.0\n */\n@Directive({\n\tselector: '[ngbScrollSpyFragment]',\n\thost: {\n\t\t'[id]': 'id',\n\t},\n})\nexport class NgbScrollSpyFragment implements AfterViewInit {\n\tprivate _destroyRef = inject(DestroyRef);\n\tprivate _scrollSpy = inject(NgbScrollSpy);\n\n\t/**\n\t * The unique id of the fragment.\n\t * It must be a string unique to the document, as it will be set as the id of the element.\n\t */\n\t@Input('ngbScrollSpyFragment') id: string;\n\n\tngAfterViewInit() {\n\t\tthis._scrollSpy._registerFragment(this);\n\t\tthis._destroyRef.onDestroy(() => this._scrollSpy._unregisterFragment(this));\n\t}\n}\n","import { NgModule } from '@angular/core';\n\nimport { NgbScrollSpy, NgbScrollSpyFragment, NgbScrollSpyItem, NgbScrollSpyMenu } from './scrollspy';\n\nexport { NgbScrollSpy, NgbScrollSpyItem, NgbScrollSpyFragment, NgbScrollSpyMenu } from './scrollspy';\nexport { NgbScrollSpyConfig } from './scrollspy-config';\nexport { NgbScrollSpyService, NgbScrollSpyProcessChanges } from './scrollspy.service';\n\n@NgModule({\n\timports: [NgbScrollSpy, NgbScrollSpyItem, NgbScrollSpyFragment, NgbScrollSpyMenu],\n\texports: [NgbScrollSpy, NgbScrollSpyItem, NgbScrollSpyFragment, NgbScrollSpyMenu],\n})\nexport class NgbScrollSpyModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}